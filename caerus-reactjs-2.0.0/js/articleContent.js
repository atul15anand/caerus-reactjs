!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){var n=window.location.href.includes("/inno/")?document.getElementById("navAccountDropdownDesktop"):document.getElementById("MarketNav"),r=document.createElement("div");r.innerHTML=e,r.style.color=t,r.style.fontSize="20px",r.style.fontWeight="700",r.style.position="absolute",r.style.right="350px",r.style.zIndex="100",n.parentNode.insertBefore(r,n)}chrome.runtime.onMessage.addListener((function(n,r,o){if(!n.url!==window.location.href){if("storeRssSourceNotFound"===n.action){var a=localStorage.getItem("rss_sources_url")?JSON.parse(localStorage.getItem("rss_sources_url")):[],l=n.data;return a.includes(l)||(a.push(l),localStorage.setItem("rss_sources_url",JSON.stringify(a))),t("Rss Source not found.Add "+l,"red"),"Returned"}if("storeConfirmedUrl"===n.action){var i=JSON.parse(localStorage.getItem("articleLinksData"))||[],c=n.url.replace("?flagToClose=true","");if(!i.includes(c)){var s=[].concat(function(t){if(Array.isArray(t))return e(t)}(u=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[c]);localStorage.setItem("articleLinksData",JSON.stringify(s))}n.message&&t("Synced Successfully","green"),o({success:!0})}else"dataMissingMessage"===n.action?t(Object.keys(n.data).filter((function(e){return""===n.data[e]||null==n.data[e]}))+" missing, request cannot be processed","red"):"cookieMissingError"===n.action?t("You need to login in https://news.almaconnect.com.","red"):(n.action="duplicateData")&&(t("News article already processed","red"),o({success:!0}))}var u})),window.onload=function(){var e,t,n,r=document.querySelector('link[rel="canonical"]'),o=r?r.href:null,a=document.querySelector('link[rel="alternate"][type="application/rss+xml"]'),l="http://feeds.bizjournals.com/bizj_"+document.querySelector("[name=market]").content,i=a?a.href.replace(/^https:\/\//i,"http://"):l,c=document.querySelector('meta[name="publish-date"]'),s=c?c.getAttribute("content"):null,u=window.location.href;if(u.includes("/inno/")){console.log("we are inside inno");var d=document.getElementsByTagName("h1")[0];t=d?d.innerHTML:"";for(var m=document.getElementsByClassName("article-content-item--paragraph"),g=null,f=0;f<m.length;f++)g+=m[0];e=g;var y=document.getElementsByTagName("img")[0];n=y?y.src:null}else{var p=document.querySelector(".detail__headline");t=p?p.innerText:document.querySelector('meta[name="ta:title"]').getAttribute("content")||"";var h=document.getElementsByClassName("content")[0],S=document.getElementsByClassName("content")[2];e=(h?h.innerText:"")+(S?S.innerText:"");var v=document.querySelector('meta[property="og:image:secure_url"]');n=v?v.content:null}var b={content:{rss_source_url:i,article_url:o,article_content:e,image_url:n,source:"bizjournals.com",published_at:s,title:t.trim(),link:u}};chrome.runtime.sendMessage({action:"sendContentFromUrls",data:b,url:window.location.href})}}();